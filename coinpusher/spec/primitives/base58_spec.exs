defmodule Base58Spec do
  use ESpec
  alias CoinPusher.Base58

  # https://github.com/bitcoin/bitcoin/blob/master/src/test/data/base58_encode_decode.json
  describe "base58 encoding" do
    it do: expect Base58.encode(<<0x61>>) |> to(eq '2g')

    it do: expect Base58.encode(<<0x62, 0x62, 0x62>>) |> to(eq 'a3gV')

    it do: expect Base58.encode(<<"ccc">>) |> to(eq 'aPEr')
    
    it do: expect Base58.encode(
      <<0x73, 0x69, 0x6d, 0x70, 0x6c, 0x79, 0x20, 0x61, 0x20, 0x6c,
      0x6f, 0x6e, 0x67, 0x20, 0x73, 0x74, 0x72, 0x69, 0x6e, 0x67>>
    ) |> to(eq '2cFupjhnEsSn59qHXstmK2ffpLv2')

    it do: expect Base58.encode(
      <<0x00, 0xeb, 0x15, 0x23, 0x1d, 0xfc, 0xeb, 0x60, 0x92, 0x58,
      0x86, 0xb6, 0x7d, 0x06, 0x52, 0x99, 0x92, 0x59, 0x15, 0xae,
      0xb1, 0x72, 0xc0, 0x66, 0x47>>
    ) |> to(eq '1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L')

    it do: expect Base58.encode(<<0x51, 0x6b, 0x6f, 0xcd, 0x0f>>) |> to(eq 'ABnLTmg')

    it do: expect Base58.encode(<<0xbf, 0x4f, 0x89, 0x00, 0x1e, 0x67, 0x02, 0x74, 0xdd>>)
      |> to(eq '3SEo3LWLoPntC')

    it do: expect Base58.encode(<<0x57, 0x2e, 0x47, 0x94>>) |> to(eq '3EFU7m')

    it do: expect Base58.encode(<<0xec, 0xac, 0x89, 0xca, 0xd9, 0x39, 0x23, 0xc0, 0x23, 0x21>>)
      |> to(eq 'EJDM8drfXA6uyA')

    it do: expect Base58.encode(<<0x10, 0xc8, 0x51, 0x1e>>) |> to(eq 'Rt5zm')

    it do: expect Base58.encode(<<0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00>>)
      |> to(eq '1111111111')
  end
end
